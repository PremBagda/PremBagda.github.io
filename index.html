<!DOCTYPE html>
<html>
	<head>
		<title>Random Joke Picker</title>
		<link rel="shortcut icon" type="image/png" href="./favicon.png" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
			crossorigin="anonymous"
		/>
	</head>

	<body>
		<nav class="navbar navbar-dark bg-dark">
			<div class="container">
				<input
					class="form-control"
					type="file"
					name="inputfile"
					id="inputfile"
				/>
			</div>
		</nav>

		<br />
		<br />
		<div class="container"><h3 id="output"></h3></div>

		<nav
			class="navbar fixed-bottom navbar-light bg-primary justify-content-end"
		>
			<!-- <div class="d-grid gap-2 d-flex"> -->
			<div class="d-grid gap-2 col-6 mx-auto">
				<input
					type="button"
					class="btn btn-success btn-lg"
					name="NextJokeBtn"
					value="Next Joke"
					id="NextJokeBtn"
				/>
			</div>
		</nav>

		<script type="text/javascript">
			var jokesArray = [];

			document
				.getElementById("inputfile")
				.addEventListener("change", function () {
					var fr = new FileReader();
					fr.onload = function () {
						var jokesString = fr.result;
						jokesArray = jokesString.split("\n");
						var selectedJoke =
							jokesArray[Math.floor(Math.random() * jokesArray.length)].trim();

						while (selectedJoke.replace(/\s/g, "") == "") {
							selectedJoke =
								jokesArray[
									Math.floor(Math.random() * jokesArray.length)
								].trim();
						}

						document.getElementById("output").textContent = selectedJoke;
					};

					fr.readAsText(this.files[0]);
				});

			document
				.getElementById("NextJokeBtn")
				.addEventListener("click", function () {
					var selectedJoke =
						jokesArray[Math.floor(Math.random() * jokesArray.length)].trim();

					while (selectedJoke.replace(/\s/g, "") == "") {
						selectedJoke =
							jokesArray[Math.floor(Math.random() * jokesArray.length)].trim();
					}

					document.getElementById("output").textContent = selectedJoke;
				});
		</script>
	</body>
</html>
